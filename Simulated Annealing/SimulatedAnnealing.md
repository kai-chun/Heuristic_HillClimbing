# Simulated Annealing

## 實驗環境

- PI = 3.141592653589793116  
- iteration = 1000

- Sphere 方程式
數值範圍：-100 ~ 100  
撒點位置：-99.7497

- Rastrigin方程式
數值範圍：-1.5 ~ 1.5  
撒點位置：-1.49625 

## 演算法流程
1.	設定迭代次數、撒點位置、方程式之數值範圍
2.	分別為 Sphere 方程式及 Rastrigin 方程式撰寫 function，作為方程式之輸入、輸出
3.	模擬退火演算法：  
在 Sphere 方程式及 Rastrigin 方程式的模擬退火演算法中，設初始步伐為domain範圍 / 1000，設初始溫度為domain範圍 / 100，在每次迭代中隨機取得在移動一個步伐的情況下某一個鄰居的位置，接著以Metropolis 準則，決定接受此鄰居的機率；若接受，則記錄當次位置。若此次解為目前最佳解，則修改 min_iteration 及 min_ans 所記錄的最小值之迭代世代與最小值。在計算過程中，步伐會隨斜率做改變，而溫度會隨著時間遞減。

## 如何產生鄰近解
在 Sphere 方程式及 Rastrigin 方程式中，以每迭代 15 次作為修改步伐的時機，在調整步伐大小時，會透過前一個位置與當前位置計算斜率，若坡度較陡（認為離最佳解較遠），則將步伐跨大；反之，若坡度較緩（認為離最佳解較近），則將步伐縮小。  
而演算法會以隨機的方式取得要考慮的鄰居，再以 Metropolis 準則決定是否接受這個鄰居為當次位置

## 退火時的溫度控制
在兩個方程式的設定中，皆在前 150 迭代中設定一個 count_worse 值來計算是否卡在同一個位置多次，若卡住了則將溫度提高（分別調整 2 倍及 1.5 倍）。後續皆是以接近 1 的倍數隨時間進行遞減調整（分別調整0.99~0.97 倍及 0.96 倍）

## 收斂圖

1. Sphere 方程式  
![image](https://user-images.githubusercontent.com/32695855/114406742-5cfa1080-9bda-11eb-9365-ae1dc3615cb5.png)

2. Rastrigin 方程式  
![image](https://user-images.githubusercontent.com/32695855/114406754-5ff50100-9bda-11eb-9c97-0066e2d53e6b.png)


